<%
background_color = component[:attributes][:bgcolor]
background_images = []
background_positions = []

if component[:attributes].has_key?(:backgrounds) # retro-compatibility
  component[:attributes][:backgrounds].each do |item|
    blob_id = item[:image][:id]
    blob = ActiveStorage::Blob.find blob_id
    url = "url(#{url_for(blob)})"
    position = "#{item[:posh]} #{item[:posv]}"
    background_images << url
    background_positions << position
  end
end
%>

<div class="row <%= promethee_class_for component %>" style="background-color: <%= background_color %>; <%= background_images.count > 0 ? "background-repeat: no-repeat; background-image: #{background_images.join(', ')}; background-position: #{background_positions.join(', ')}" : '' %>">
  <%= render 'promethee/show/components', components: component[:children] %>
</div>
