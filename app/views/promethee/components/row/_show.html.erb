<%
background_color = component[:attributes][:bgcolor]
background_images = []
background_positions = []

index = 1
while component[:attributes].has_key?("bgimage#{index}".to_sym) do
    blob_id = component[:attributes]["bgimage#{index}".to_sym][:id]
    blob = ActiveStorage::Blob.find blob_id
    bg_pos_h = component[:attributes]["bgimage#{index}_position_h".to_sym]
    bg_pos_v = component[:attributes]["bgimage#{index}_position_v".to_sym]
    url = "url(#{url_for(blob)})"
    position = "#{bg_pos_h} #{bg_pos_v}"
    background_images << url
    background_positions << position
    index += 1
end
%>

<div class="row <%= promethee_class_for component %>" style="background-color: <%= background_color %>; <%= background_images.count > 0 ? "background-repeat: no-repeat; background-image: #{background_images.join(', ')}; background-position: #{background_positions.join(', ')}" : '' %>">
  <%= render 'promethee/show/components', components: component[:children] %>
</div>
