<script type="text/ng-template" id="promethee/component">
  <div ng-controller="Component as component" ng-init="component.data = data || promethee.data" draggable>
    <div ng-include src="'promethee/' + component.data.type"></div>
  </div>
</script>

<script>
  Promethee.Controller.for('Component', ['$scope', 'state', function($scope, state) {
    $scope.selected = false;

    $scope.select = function() {
      this.selected = true;
      state.selected = this.data;
    };

    Object.defineProperties(this, {
      editing: {
        get: function() {
          return this._editing && state.editing;
        },

        set: function(v) {
          this._editing = state.editing = v;
        }
      }
    });

    this.edit = function() {
      alert('ok');
      this.editing = true;
    };

    this.complete = function() {
      this.editing = false;
    };
  }]);
</script>
