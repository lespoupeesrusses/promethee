<script type="text/ng-template" id="promethee/write/component/cover">
  <div ng-controller="CoverController" class="promethee-editor__component promethee-editor__component--cover">
    <div class="promethee-editor__toolbar">
      Cover
      <ng-include src="'promethee/write/toolbar'"></ng-include>
    </div>
    <div ng-show="editing" class="promethee-editor__wrapper">
      <div class="form-group">
        <label class="label-control">Image Url</label>
        <input ng-model="component.attributes.src" class="form-control" type="text"/>
      </div>
    </div>

    <div
      ng-hide="editing"
      class="promethee-editor__wrapper promethee-editor__cover-content"
      ng-bind-html="component.attributes.body | htmlSafe"
      ng-click="edit()"
      style="background-image: url('{{component.attributes.src}}')"
    ></div>

    <div
      ng-show="editing"
      class="promethee-editor__wrapper promethee-editor__cover-content"
      style="background-image: url('{{component.attributes.src}}')"
    >
      <summernote config="options" ng-model="component.attributes.body"></summernote>
    </div>
  </div>
</script>

<script>
  angular.injector(['ng', 'Promethee']).get('definitions').push({
    name: 'Cover',
    thumb: 'http://via.placeholder.com/300x200',
    data: {
      type: 'cover',
      attributes: {
        src: 'https://source.unsplash.com/random/1920x1080',
        alt: '',
        caption: ''
      }
    }
  });

  promethee.controller('CoverController', ['$scope', function($scope) {
    $scope.editing = false;

    $scope.edit = function() {
      $scope.editing = true;
    };

    $scope.complete = function() {
      $scope.editing = false;
    };

    $scope.toggleEdit = function() {
      $scope.editing = !$scope.editing;
    };

    $scope.options = {
      toolbar: [
        ['headline', ['style']],
        ['style', ['bold', 'italic']],
        ['alignment', ['ul', 'ol', 'paragraph']],
        ['code', ['codeview']]
      ]
    };
  }]);
</script>
